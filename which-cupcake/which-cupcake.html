<head>
    <title>which-cupcake</title>
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css">
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.3.0/animate.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.css">
    <script src="//use.typekit.net/zjr2ygg.js"></script>
	<script>try{Typekit.load();}catch(e){}</script>
</head>


<body>
	<div class = "container">
		<header>

			<div class="row">
				<div class="eight columns">
	  				<h1>Which cupcake?</h1>
	  			</div>
	  			<div class="four columns btn-ask-column">
	  				<button class="ask" data-modal-template="askModal">
	                	<i class="fa fa-plus" style="padding-right:5px;"></i>Ask
	            	</button>
	            	{{>askModal}}
	  			</div>
			</div>
			

		</header>
		
		<!-- Use `name` to add a custom class to the outer container -->
  	

  		{{#basicTabs name="homepageTabs" tabs=tabs}}


    <!--
      There are two ways to define content for your tabs:

      1. Wrap each tabbed section in a blank `<div></div>`.
         Sections must correspond with the order of the tabs you specified.

      2. Wrap each tabbed section in the provided block helper (RECOMMENDED!).
         `{{#tabContent slug="nameOfSlug"}} ... {{/tabContent}}`
         These can be defined in any order you like.
    -->
    	{{#tabContent slug="openpolls"}}
				<ul>
			    {{#each polls}}
			    	{{#if isOpen status}}
			      	{{> poll}}
			    	{{/if}}
			    {{/each}}
			  </ul>
			{{/tabContent}}

			{{#tabContent slug="closedpolls"}}
				<ul>
			    {{#each polls}}
			    	{{#unless isOpen status}}
			      	{{> poll}}
			    	{{/unless}} 
			    {{/each}}
			  </ul>
			{{/tabContent}}

			{{#tabContent slug="mypolls"}}
				<ul>
			    {{#each polls}}
			    	{{> poll}}	 
			    {{/each}}
			  </ul>
			{{/tabContent}}

		{{/basicTabs}}
	</div>

        {{> voteForm}}
</body>

<template name="poll">
	<li class="row card">
		<div>
			<div class="question-title">
				<h2 class="question">{{text}}</h2>
			</div>
	  		
	  		<div class="content">
		  		<div>
			  		<h5 class="time">{{createdAt}}</h5>
			  		<h5 class="askedBy">{{askedBy}} asked this question</h5>
		  		</div>
				
			  	<div class="option-row row">
					<div class="option one-half column">
						<div class="option-img"></div>
						<div>
							<h4>Option 1: {{option1}}</h4>
					  		<button class="vote1"> Vote </button>
						</div>
				  	</div>
				  	<div class="option one-half column">
				  		<li>Option 2: {{option2}}</li>
				  		<button class="vote2"> Vote </button>
				  	</div>
			  	</div>

			  	<div>
					<h5>Status:{{status}}</h5>
					<h5>There are {{timeLeft}} minutes left to vote.</h5>
				</div>
	  		</div>
	  		
		</div>
	</li>
</template>

<template name="askModal">  
  {{#if activeModal}}
    <form class="addPoll">
      <input type="text" name="text" placeholder="Type to add new poll" />
      <input type="number" name="duration" placeholder="Set a duration for your poll"/> <p>minutes</p>
      <br>
      <p>Option 1</p><input type="file" name="option1" class="imageUpload1">
      {{#if option1}}
      	<a href="{{option1}}"> <img src = {{option1}} height="100%" width="100" alt=""></a>
      {{/if}}
      <p>Option 2</p><input type="file" name="option2" class="imageUpload2">
      {{#if option2}}
      	<img src = {{option2}} height="100%" width="100">
      {{/if}}
      <p>Asked By</p><input type="text" name="askedBy"/> 
      <input type="submit" value="Submit">
    </form>
  {{/if}}
</template>

<template name="voteForm">
  <form>
    <input type="text" name="pollId">
    <input type="text" name="decision">
    <input type="submit" value="Vote">
  </form>
</template>

